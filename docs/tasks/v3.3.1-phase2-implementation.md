# Phase 2 - Migration Support - Implementation Checklist

**Total Scope**: 12 hours over 2-3 weeks
**Start Date**: Week of 2026-02-02
**Completion Date**: 2026-02-02 (same day!)
**Status**: ‚úÖ Complete
**Approach**: Build tools to help existing projects migrate to TMS

## Completion Status

- ‚úÖ **Task 2.1: Project Analyzer** (6h) - Analyze existing projects, detect framework, recommend TMS structure
- ‚úÖ **Task 2.4: Savings Projection** (3h) - Show token/cost savings in analyze output
- ‚úÖ **Task 2.6: Migration Guide** (3h) - Comprehensive migration guide for existing projects

**All Phase 2 tasks complete!** Ready for v3.3.1 release.

---

## Task 2.1: Project Analyzer ‚úÖ COMPLETE

**Goal**: Analyze existing project structure and suggest TMS setup for migration

**Status**: ‚úÖ Complete (Feb 2, 2026)

### Implementation Summary

**Files Created**:
- `src/commands/analyze.ts` - CLI command for project analysis
- `src/utils/project-analyzer.ts` - Core analysis logic
- `src/cli.ts` - Command registration (updated)

**Features Implemented**:
- ‚úÖ Scan existing documentation (README, CONTRIBUTING, docs/)
- ‚úÖ Detect project type/framework (Next.js, React, Express, etc.)
- ‚úÖ Estimate project size (file count, LOC)
- ‚úÖ Assess doc quality (good/fair/poor)
- ‚úÖ Recommend TMS scope (nano/standard/enterprise)
- ‚úÖ Generate migration strategy (what to keep, what to migrate)
- ‚úÖ Estimate migration effort (15min - 4h range)

**Usage**:
```bash
cortex-tms analyze
```

**Output**:
- Project overview (name, type, size, existing docs)
- Doc quality assessment
- Recommended TMS structure
- Migration strategy steps
- Effort estimate

### Testing Completed

- ‚úÖ Tested on cortex-tms repo itself
- ‚úÖ Detects TypeScript/Node.js project
- ‚úÖ Finds existing documentation
- ‚úÖ Recommends enterprise scope
- ‚úÖ Suggests migration steps

### Deliverable

CLI command that helps users understand:
1. What they currently have
2. What TMS structure fits them
3. How to migrate (manual steps)

---

## Task 2.4: Savings Projection (3h) ‚úÖ COMPLETE

**Goal**: Show users "You'll save $X/month" estimate based on their project

**Status**: ‚úÖ Complete (Feb 2, 2026)

### Implementation Summary

**Files Modified**:
- `src/utils/project-analyzer.ts` - Added savings calculation logic
- `src/commands/analyze.ts` - Display savings section in output

**Features Implemented**:
- ‚úÖ Calculate token reduction (full repo vs HOT tier)
- ‚úÖ Estimate monthly AI sessions based on project size
- ‚úÖ Calculate cost savings per session and per month
- ‚úÖ Use Claude Sonnet 4.5 pricing as baseline
- ‚úÖ Display savings projection in analyze command output

**Calculation Logic**:
```typescript
// Estimate monthly sessions based on project size
- Small projects (<10 files): 20 sessions/month
- Medium projects (<100 files): 40 sessions/month
- Large projects (100+ files): 60 sessions/month

// Calculate savings
tokenReduction = fullRepoTokens - hotTierTokens
costPerSession = (tokenReduction / 1M) √ó modelInputPrice
monthlyS avings = costPerSession √ó sessionsPerMonth
```

**Output Example**:
```
üí∞ Potential Savings with TMS
  Context reduction: 88,531 tokens (96.5%)
  Estimated usage: 40 AI sessions/month
  Savings per session: ~$0.266
  Savings per month: ~$10.62
  (Based on claude-sonnet-4.5 pricing)
```

### Deliverable

‚úÖ `cortex-tms analyze` now shows token/cost savings projection

### ~~Planned Approach~~

**Integration Point**: Add to `cortex-tms analyze` output

**Calculation Strategy**:
```
savings = (full_repo_tokens - hot_tier_tokens) √ó sessions_per_month √ó cost_per_token
```

**Implementation Steps** (when started):
1. Calculate token counts:
   - Full repo (all files)
   - HOT tier (active docs only)
   - Context reduction %
2. Estimate usage:
   - Assume X dev sessions/month based on project size
   - Use current model pricing (Claude, GPT-4, etc.)
3. Display projection:
   - Monthly token savings
   - Estimated $ savings
   - Show breakdown

**File**: `src/utils/project-analyzer.ts` (add savings calculation)

**Deliverable**: `cortex-tms analyze` shows token/cost savings projection

---

## Task 2.6: Migration Guide (3h) ‚úÖ COMPLETE

**Goal**: Manual migration guide for existing projects

**Status**: ‚úÖ Complete (Feb 2, 2026)

### Implementation Summary

**Files Modified**:
- `docs/guides/MIGRATION-GUIDE.md` - Comprehensive migration guide (enhanced existing file)
- `src/commands/analyze.ts` - Reference guide in analyze output

**Content Added**:
- ‚úÖ Pre-Migration Checklist (backup, analyze, plan)
- ‚úÖ Analyze Your Project section (explains analyze command output)
- ‚úÖ Step-by-Step Migration (5 detailed steps)
- ‚úÖ Common Patterns table (existing docs ‚Üí TMS files mapping)
- ‚úÖ Post-Migration validation and testing
- ‚úÖ Troubleshooting section (common issues + fixes)
- ‚úÖ Quick Start TL;DR for experienced devs

**Structure**:
1. **Pre-Migration Checklist**: Backup, analyze, review, choose scope
2. **Analyze Your Project**: Run `cortex-tms analyze` for recommendations
3. **Step-by-Step Migration**: Initialize, map docs, migrate content, update refs, archive
4. **Common Patterns**: Complete mapping table (README, CONTRIBUTING, ARCHITECTURE, etc.)
5. **Post-Migration**: Validation, team updates, AI testing, measure savings
6. **Troubleshooting**: Common issues and solutions
7. **Quick Start**: TL;DR for fast migration

**Integration**:
```bash
cortex-tms analyze
# Output now includes:
# "2. Read full migration guide: docs/guides/MIGRATION-GUIDE.md"
```

**Key Features**:
- Preserves existing version upgrade content
- Safe migration (never overwrites without confirmation)
- Incremental approach (start with HOT tier)
- Practical examples and command snippets
- Team communication templates

### Deliverable

‚úÖ Comprehensive migration guide written and integrated with analyze command

### ~~Planned Approach~~

**File**: `docs/guides/MIGRATION.md` (new guide)

**Content Structure** (when created):
1. **Pre-Migration Checklist**
   - Backup existing docs
   - Run `cortex-tms analyze`
   - Review migration strategy
2. **Step-by-Step Migration**
   - Initialize TMS structure
   - Map existing docs ‚Üí TMS files
   - Preserve important content
   - Archive deprecated docs
3. **Common Patterns**
   - README ‚Üí Keep as-is
   - CONTRIBUTING ‚Üí docs/core/PATTERNS.md
   - ARCHITECTURE ‚Üí docs/core/ARCHITECTURE.md
   - TODO lists ‚Üí NEXT-TASKS.md
4. **Post-Migration**
   - Run validation
   - Update team documentation
   - Test AI session flow

**Integration**: Reference from `cortex-tms analyze` output

**Deliverable**: Comprehensive migration guide

---

## Success Criteria

### Phase 2 Complete When:
- ‚úÖ Task 2.1: Analyzer command working (DONE)
- ‚úÖ Task 2.4: Savings projection added to analyze (DONE)
- ‚úÖ Task 2.6: Migration guide written and tested (DONE)
- ‚è∏Ô∏è 5+ users successfully migrate existing projects (Post-release measurement)
- ‚è∏Ô∏è Feedback shows migration is <30min for most projects (Post-release measurement)

---

## Git Protocol

### Branch Strategy
- `develop` ‚Üí All Phase 2 work
- Merge to `main` when phase complete

### Commit Messages
```bash
# Task 2.1 (DONE)
git commit -m "feat(migration): add project analyzer command

Analyzes existing projects and suggests TMS setup:
- Scan docs, detect framework, assess quality
- Recommend scope and migration strategy
- Estimate effort (15min - 4h)

Files: src/commands/analyze.ts, src/utils/project-analyzer.ts

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"

# Task 2.4 (when started)
git commit -m "feat(migration): add savings projection to analyzer

Shows token/cost savings estimate:
- Calculate full repo vs HOT tier tokens
- Estimate monthly sessions and costs
- Display $ savings projection

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"

# Task 2.6 (when started)
git commit -m "docs: add comprehensive migration guide

Manual migration for existing projects:
- Pre-migration checklist
- Step-by-step process
- Common patterns mapping
- Post-migration validation

File: docs/guides/MIGRATION.md

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"
```

---

## Next Immediate Actions

**Current Status**: Task 2.1 complete, ready to commit

**Next Steps**:
1. ‚úÖ Update NEXT-TASKS.md (mark 2.1 complete) - DONE
2. ‚úÖ Create this implementation doc - DONE
3. ‚è≥ Run validation on develop branch
4. ‚è≥ Prepare for merge to main
5. ‚è≥ Start Task 2.4 or 2.6 (user decision)

---

## Notes

**Task 2.1 Completion Date**: Feb 2, 2026
**Remaining Phase 2 Work**: 6 hours (Tasks 2.4 + 2.6)
**Estimated Phase 2 Completion**: Mid-Feb 2026

<!-- @cortex-tms-version 3.1.0 -->
